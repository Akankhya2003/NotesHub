<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Faculty Login</title>
  <link rel="stylesheet" href="faculty-login.css" />
</head>
<body>
<!-- Faculty Login Form -->
<form id="facultyLoginForm" class="form">
  <h2>Faculty Login</h2>

  <input type="email" id="facultyEmail" placeholder="Email" required />
  <input type="password" id="facultyPassword" placeholder="Password" required />
  <button type="submit" class="btn">Login</button>
</form>

<script>
  const BACKEND_URL = "https://noteshub-tdw3.onrender.com";

  document.getElementById("facultyLoginForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const email = document.getElementById("facultyEmail").value.trim();
    const password = document.getElementById("facultyPassword").value;

    try {
      const res = await fetch(`${BACKEND_URL}/api/faculty/login`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email, password }),
      });

      const data = await res.json();

      if (res.ok) {
        localStorage.setItem("facultyToken", data.token);
        localStorage.setItem("facultySubjects", JSON.stringify(data.faculty.assignedSubjects));
        window.location.href = "admin.html"; // Redirect to faculty panel
      } else {
        alert(data.msg || "Login failed. Please check your credentials.");
      }
    } catch (error) {
      alert("Network error. Please try again later.");
      console.error("Login error:", error);
    }
  });
</script>
</body>
</html>
